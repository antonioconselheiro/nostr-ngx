<h2 class="title">Create account</h2>

<form [formGroup]="generateNostrSecretForm" (submit)="onSubmit()" novalidate autocomplete="off">
  <div class="floatingLabel">
    <input #password name="password" tabindex="11" [maxlength]="passwordLength" formControlName="password"
      (keyup)="updateNcryptsec(password.value)" (change)="renderQRCode()" id="encryptNostrSecretPasswordField"
      [attr.type]="showPassword ? 'text' : 'password'" placeholder=" " />

    <label for="encryptNostrSecretPasswordField">Password</label>

    <button type="button" tabindex="4" [attr.title]="showPassword ? 'hide password' : 'show password'"
      (click)="showPassword = !showPassword" class="bordered svgButton">
      <nostr-svg-render [name]="showPassword ? 'eyeOff' : 'eye'"></nostr-svg-render>
    </button>

    <ng-container *ngIf="showErrors('password')">
      <span *ngIf="getFormControlErrorStatus('password', 'invalid')" class="error">
        Invalid password, nsec could not be open
      </span>
    </ng-container>
  </div>

  <div class="floatingLabel">
    <input #confirmPassword name="confirmPassword" tabindex="12" [maxlength]="passwordLength"
      formControlName="confirmPassword" id="encryptNostrSecretRepeatPasswordField"
      [attr.type]="showPassword ? 'text' : 'password'" placeholder=" " />

    <label for="encryptNostrSecretRepeatPasswordField">Confirm password</label>

    <button type="button" tabindex="4" [attr.title]="showConfirmPassword ? 'hide password' : 'show password'"
      (click)="showConfirmPassword = !showConfirmPassword" class="bordered svgButton">
      <nostr-svg-render [name]="showConfirmPassword ? 'eyeOff' : 'eye'"></nostr-svg-render>
    </button>

    <ng-container *ngIf="showErrors('password')">
      <span *ngIf="getFormControlErrorStatus('password', 'invalid')" class="error">
        Invalid password, nsec could not be open
      </span>
    </ng-container>
  </div>

  <div class="floatingLabel">
    <input #qrcodeName name="qrcodeName" tabindex="12" formControlName="qrcodeName"
      id="encryptNostrSecretQrcodeNameField" (keyup)="renderQRCode()" type="text" placeholder=" " />

    <label for="encryptNostrSecretQrcodeNameField">QRCode Title</label>
  </div>

  Save this qrcode, it contains your Nostr secret encrypted with your password.

  <div>
    <img *ngIf="qrcode" class="qrcode" [src]="qrcode" #qrcode />
  </div>
</form>