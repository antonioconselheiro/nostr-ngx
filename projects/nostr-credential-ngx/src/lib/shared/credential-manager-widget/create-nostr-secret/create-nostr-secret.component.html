<h2 class="title">Create account</h2>

<form [formGroup]="generateNostrSecretForm" (submit)="onSubmit()" novalidate autocomplete="off">
  <ul>
    <li>
      Nostr secret (nsec) can't be changed.
    </li>
    <li>
      It gives complete access to account.
    </li>
    <li>
      If you lost it, your account will be lost forever.
    </li>
  </ul>

  <div [class.error]="submitted && getFormControlErrors('nostrSecret')" class="floatingLabel">
    <input #nostrSecret required name="nostrSecret" tabindex="11" maxlength="64"
      formControlName="nostrSecret" id="generateNostrSecretField"
      [class.hasValue]="nostrSecret.value" readonly [attr.type]="showNostrSecret ? 'text' : 'password'" />
    <label for="generateNostrSecretField">Nostr Secret (nsec)</label>

    <button type="button" tabindex="17" title="generate new nsec" class="bordered svgButton">

      <nostr-svg-render name="repeat"></nostr-svg-render>
    </button>

    <button type="button" tabindex="18" [attr.title]="showNostrSecret ? 'hide nostr secret' : 'show nostr secret'"
      (click)="showNostrSecret = !showNostrSecret" class="bordered svgButton">

      <nostr-svg-render [name]="showNostrSecret ? 'eyeOff' : 'eye'"></nostr-svg-render>
    </button>

    <ng-container *ngIf="submitted">
      <span *ngIf="getFormControlErrorStatus('nostrSecret', 'required')" class="error">
        Nostr Secret is required
      </span>
    </ng-container>
  </div>

  <div class="floatingLabel">
    <input name="nostrPublic" #nostrPublic tabindex="11" maxlength="64" formControlName="nostrPublic"
      id="nostrPublicField" [class.hasValue]="nostrPublic.value" readonly />
    <label for="nostrPublicField">Nostr Public (npub)</label>
  </div>

  Store your nsec locally with an encrypted qrcode.

  <div class="floatingLabel">
    <input #password name="password" tabindex="1" [maxlength]="passwordLength" formControlName="password"
      id="createNostrSecretPasswordField" [class.hasValue]="password.value" [attr.type]="showPassword ? 'text' : 'password'" />

    <label for="createNostrSecretPasswordField">Password</label>

    <button type="button" tabindex="4" [attr.title]="showPassword ? 'hide password' : 'show password'"
     (click)="showPassword = !showPassword" class="bordered svgButton">
      <nostr-svg-render [name]="showPassword ? 'eyeOff' : 'eye'"></nostr-svg-render>
    </button>

    <ng-container *ngIf="showErrors('password')">
      <span *ngIf="getFormControlErrorStatus('password', 'invalid')" class="error">Invalid password, nsec could not be open</span>
    </ng-container>
  </div>

  <div class="floatingLabel">
    <input name="ncryptsec" #ncryptsec tabindex="11" maxlength="64" formControlName="ncryptsec"
      id="createNostrSecretNcryptsecField" [class.hasValue]="ncryptsec.value" readonly />
    <label for="createNostrSecretNcryptsecField">Ncryptsec (encrypted nostr secret)</label>
  </div>
</form>
<!--

<NSEC> <GENERATE>



<PASSWORD>


<PRIVATEQRCODE>
<NCRYPRSEC-READONLY>

<NPUB>

<checkbox> authenticate and create

  <BTN>Next > </BTN>

-->