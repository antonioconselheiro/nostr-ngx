<h2 class="title">Create account</h2>

<form [formGroup]="generateNsecForm" novalidate autocomplete="off">
  <div class="fieldWrapper">
    <input #qrcodeTitle name="qrcodeTitle" maxlength="32" formControlName="qrcodeTitle"
      id="generateNsecQRCodeTitleField" type="text" placeholder=" " nostrListenTypingComplete 
      (typingCompleted)="renderQrcode()" autofocus [timeout]="500" />
    <label for="generateNsecQRCodeTitleField">QRCode Title</label>
  </div>

  <div class="fieldWrapper">
    <input #nsec name="nsec" maxlength="64" formControlName="nsec" id="generateNsecFieldCreationForm" readonly
      type="password" placeholder=" " />
    <label for="generateNsecFieldCreationForm">nsec</label>

    <button (click)="copyNsec()" type="button" title="copy nsec" class="svgButton">
      <nostr-svg-render name="copy"></nostr-svg-render>
    </button>

    <button (click)="generateNsec()" type="button" title="generate new nsec" class="svgButton">
      <nostr-svg-render name="repeat"></nostr-svg-render>
    </button>
  </div>

  <div class="fieldWrapper">
    <input #npub name="npub" maxlength="64" formControlName="npub" id="generateNpubFieldCreationForm" readonly
      type="text" placeholder=" " />
    <label for="generateNpubFieldCreationForm">npub</label>
  </div>

  <div>
    <img *ngIf="nsecQRCode" class="qrcode" [src]="nsecQRCode" #qrcode alt="qrcode with your nsec" />
  </div>

  <ul>
    <li>
      Nsec can't be changed.
    </li>
    <li>
      It gives complete access to this account.
    </li>
    <li>
      If you lost it, your account will be lost forever.
    </li>
  </ul>

  <footer class="buttonGroup">
    <button (click)="cancel()" type="button" title="back"
      class="button secondary iconedButton">
      <nostr-svg-render class="inlineIcon" name="left"></nostr-svg-render>

      <span>
        Cancel
      </span>
    </button>

    <button (click)="downloadQrcode()" type="button" title="download"
      class="button secondary iconedButton">
      <nostr-svg-render class="inlineIcon" name="download"></nostr-svg-render>

      <span>
        Download
      </span>
    </button>

    <button (click)="changeStep.next('relayManager')" type="button" title="next"
      class="button iconedButton">
      <nostr-svg-render class="inlineIcon" name="right"></nostr-svg-render>

      <span>
        Next
      </span>
    </button>
  </footer>
</form>